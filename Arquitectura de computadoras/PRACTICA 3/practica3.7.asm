.DATA 0098H 

DB 02H;VALOR DE A ;0098H
DB 04H; VALOR DE X ;0099H

DB 00H;MS RESULTADO 1(A*I)0100H
DB 00H;mS RESULTADO 1(A*I)0101H

DB 00H;MS RESULTADO 2(X^I)0102H
DB 00H;mS RESULTADO 2(X^I)0103H

DB 00H;MS RESULTADO 3(X^I)(A*I) 0104H
DB 00H;mS RESULTADO 3(X^I)(A*I) 0105H

DB 00H;MS RESULTADO FINAL 0106H
DB 00H;mS RESULTADO FINAL 0107H

DB 03H; n CONTADOR 0108H




.ORG 0115H

;B CONTADOR

MVI B,00H 
PUSH B
MAIN:

;CONTADOR I
POP B
INR B
;GUARDAR EL CONTADOR
PUSH B




;---------------------------------------------OPERACION (A*I)
MVI H,00H 
MVI L,00H
;PUNTERO PARA EL VALOR DE A 
MVI D,00H
MVI E, 98H

;SE SACA EL VALOR DE A 
LDAX D


;SE MANDA EL DATO AL MULTIPLICADOR

MVI D,00H
MOV E,A

;SE RECUPERA EL CONTADOR
POP B
PUSH B

;SE MANDA EL CONTADOR A MULTIPLICAR
MOV C,B
MVI B,00H

CALL MULTI

;PUNTERO PARA GUARDAR DATO 
MVI D,01H
MVI E, 00H

;GUARDA EL VALOR UNO 
MOV A,H
STAX D

;PUNTERO PARA GUARDAR DATO 
MVI D,01H
MVI E, 01H

;GUARDA EL VALOR UNO 
MOV A,L
STAX D

;-------------------------------------------------------FIN DE OPERACION (A*I)


POP B
PUSH B 
PUSH B


;--------------------------------------------INICIO DE OPERACIONCION (X^I)




;INICIAR EL VALOR DE RESULTADO

;TEST 
POP B
DCR B
PUSH B


;PUNTERO PARA EL VALOR DE X 
MVI D,00H
MVI E, 99H
;SE SACA EL VALOR DE X 
LDAX D

MOV C,A
MVI B,00H

MVI L,00H 
MVI H,00H

POTENCIA:

;PUNTERO PARA EL VALOR DE X 
MVI D,00H
MVI E, 99H
;SE SACA EL VALOR DE X 
LDAX D

MOV E,A
MVI D,00H

POP H
PUSH H
MOV A,H
MVI L,00H 
MVI H,00H
CPI 00H
JZ NOFLAT
JMP FLAT
NOFLAT:

MOV L,E
MOV H,D

JMP FINPOTENCIA
FLAT:
CALL MULTI



POP B
DCR B 
PUSH B 

MOV A,B
CPI 00H
JZ FINPOTENCIA

MOV B,H
MOV C,L

JMP POTENCIA
FINPOTENCIA:
POP B 






;PUNTERO PARA GUARDAR DATO 
MVI D,01H
MVI E, 02H

;GUARDA EL VALOR UNO 
MOV A,H
STAX D

;PUNTERO PARA GUARDAR DATO 
MVI D,01H
MVI E, 03H

;GUARDA EL VALOR UNO 
MOV A,L
STAX D


;---------------------------------------------FIN DE LA OPERACION  (X^I)



;-----------------------------------------------INICIO DE LA OPERACION(X^I)(A*I)







;PUNTERO PARA EL VALOR DE RESULTADO 2 MS
MVI D,01H
MVI E,02H

;SE SACA EL VALOR DE RESULTADO 2 MS
LDAX D

;SE MANDA EL DATO AL MULTIPLICADOR

MOV B,A

;PUNTERO PARA EL VALOR DE RESULTADO 2 mS
MVI D,01H
MVI E,03H

;SE SACA EL VALOR DE RESULTADO 2 mS
LDAX D

;SE MANDA EL DATO AL MULTIPLICADOR

MOV C,A




;PUNTERO PARA EL VALOR DE RESULTADO 1 MS
MVI D,01H
MVI E,00H

;SE SACA EL VALOR DE RESULTADO 1 MS
LDAX D

;SE MANDA EL DATO AL MULTIPLICADOR

MOV H,A

;PUNTERO PARA EL VALOR DE RESULTADO 1 mS
MVI D,01H
MVI E,01H

;SE SACA EL VALOR DE RESULTADO 1 mS
LDAX D

;SE MANDA EL DATO AL MULTIPLICADOR

MOV L,A

MOV D,H
MOV E,L

MVI H,00H

MVI L,00H


CALL MULTI


;PUNTERO PARA GUARDAR DATO 
MVI D,01H
MVI E, 04H

;GUARDA EL VALOR UNO 
MOV A,H
STAX D
;PUNTERO PARA GUARDAR DATO 
MVI D,01H
MVI E, 05H

;GUARDA EL VALOR UNO 
MOV A,L
STAX D


;-----------------------------------------------FIN DE LA OPERACION(X^I)(A*I)

;-----------------------------------------------SUMATORIA DEL RESULTADO



;PUNTERO PARA EL VALOR DE MS RESULTADO 3(X^I)(A*I) 
MVI D,01H
MVI E,04H

;SE SACA EL VALOR DE RESULTADO MS RESULTADO 3(X^I)(A*I) 
LDAX D

;SE MANDA EL DATO PARA SUMAR

MOV B,A

;PUNTERO PARA EL VALOR DE mS RESULTADO 3(X^I)(A*I) 
MVI D,01H
MVI E,05H

;SE SACA EL VALOR DE RESULTADO mS RESULTADO 3(X^I)(A*I) 
LDAX D

;SE MANDA EL DATO PARA SUMAR

MOV C,A





;PUNTERO PARA EL VALOR FINAL
MVI D,01H
MVI E,06H

;SE SACA EL VALOR FINAL 
LDAX D

;SE MANDA EL DATO PARA SUMAR

MOV H,A

;PUNTERO PARA EL VALOR FINAL 
MVI D,01H
MVI E,07H

;SE SACA EL VALOR FINAL 
LDAX D

;SE MANDA EL DATO PARA SUMAR

MOV L,A

DAD B




;PUNTERO PARA GUARDAR DATO 
MVI D,01H
MVI E, 06H

;GUARDA EL VALOR UNO 
MOV A,H
STAX D

;PUNTERO PARA GUARDAR DATO 
MVI D,01H
MVI E, 07H

;GUARDA EL VALOR UNO 
MOV A,L
STAX D


;-----------------------------------------------FIN DE LA SUMATORIA DEL RESULTADO




POP B
PUSH B
MOV A,B
CPI 03H ; ===N
JZ FINFIN

JMP MAIN

FINFIN:




HLT 


MULTI:
;EL RESULTADO SALE EN H Y L
;EL B Y C DEBE TENER EL NUMERO DE CICLOS
;EN D Y E, TIENE QUE ESTAR EL DATO
UNO:

DAD D 
DCX B 

MOV A,C
CPI 00H
JZ CEROUNO
JMP DOS
CEROUNO:
MOV A,B
CPI 00H
RZ
DOS:


JMP UNO